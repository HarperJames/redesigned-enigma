<html>

<script runat="server">
   Platform.Load("core","1");
  var api = new Script.Util.WSProxy();

try {

    var name = "MyNewQuery";

    var request = api.retrieve("QueryDefinition", ["CustomerKey","ObjectID","QueryText"], {
        Property: "CustomerKey", 
        SimpleOperator: "equals",
        Value: "9D63CD62-1C93-44FF-9D33-5B9A00560CF3" 
    });

     var objectID = request.Results[0].ObjectID,  
        queryText = request.Results[0].QueryText;
/*
    var request = api.retrieve("DataExtension", ["CustomerKey"], {
        Property: "Name",
        SimpleOperator: "equals",
        Value: "MyDataExtension"
    });

    var targetKey = request.Results[0].CustomerKey;

    var updated_query =  'SELECT TOP 50 SubscriberKey, EmailAddress FROM _Subscribers';

    var config = {
        ObjectID: objectID,
        Description: "My updated query",
        CategoryID: categoryID,
        TargetType: "DE",
        TargetUpdateType: "Overwrite",
        QueryText: updated_query,
        DataExtensionTarget: {
            Name: "MyDataExtension",
            CustomerKey: targetKey
        }
    };

    var result = api.updateItem("QueryDefinition", config);
 */
  
    Write("version1"+Stringify(request));

} catch(error) {

    Write(Stringify(error));
    
}

</script>
<body>
body
</body>
</html>
